{% if page.category %}
{% assign postings = page %}
{% else %}
{% assign postings = post %}
{% endif %}
{% assign vote_average = postings.vote_average | remove: "." %}
{% assign pessimo = "10,11,12,13,14,15,16,17,18,19,20" | split: ',' %}
{% assign ruim = "21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40" | split: ',' %}
{% assign aceitavel = "41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60" | split: ',' %}
{% assign otimo = "61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80" | split: ',' %}
{% assign execelente = "81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100" | split: ',' %}

{% if pessimo contains vote_average %}
	{% assign status_class = "rating-1" %}
{% elsif ruim contains vote_average %}
	{% assign status_class = "rating-2" %}
{% elsif aceitavel contains vote_average %}
	{% assign status_class = "rating-3" %}
{% elsif otimo contains vote_average %}
	{% assign status_class = "rating-4" %}
{% elsif execelente contains vote_average %}
	{% assign status_class = "rating-5" %}
{% else %}
	{% assign status_class = "rating-0" %}
{% endif %}

{% capture rating %}
{% if postings.vote_count == 0 %}
Nenhuma avaliação
{% elsif postings.vote_count <= 1 %}
{{postings.vote_count}} avaliação
{% elsif postings.vote_count >= 2 %}
{{postings.vote_count}} avaliações
{% endif %}
{% endcapture %}
<div class="article-rating">
	<div data-placeholder>
		<svg viewBox="0 0 36 36" class="circular-chart {{ status_class }}">
	        <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
	        <path class="circle" stroke-dasharray="{{ vote_average }}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
	        <foreignObject x="0" y="0" width="36" height="36">
	            <div class="percentage" style="--num: {{ vote_average }};"></div>
	        </foreignObject >
	    </svg>
	</div>
	<a href="/avaliacoes?vote_average={{status_text | slugify: "latin"}}" class="status-{{ status_text | slugify: "latin" }}" data-placeholder>{{ status_text | strip }}</a>
	<div class="rating-text" data-placeholder>{{ rating | strip }}</div>
</div>