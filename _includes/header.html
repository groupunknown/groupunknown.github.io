<header class="header_sticky">
	<div class="menu-items">
		<a class="menu-item" href="#">Página Inicial</a>
		<a class="menu-item" href="#">Filmes</a>
		<a class="menu-item" href="#">Séries</a>
		<a class="menu-item" href="#">Jogos</a>
		<a class="menu-item" href="#">Músicas</a>
		<a class="menu-item" href="#">Programas</a>
		<a class="menu-item" href="#">Blog</a>
	</div>
</header>

<header>
	<div class="rounded-items">
		<div class="rounded-items-left">
			<a class="rounded-item-left" href="#">Filmes</a>
			<a class="rounded-item-left" href="#">Séries</a>
			<a class="rounded-item-left" href="#">Blog</a>
		</div>
		<div class="rounded-items-center">
			<div class="rounded-item-logo">?</div>
		</div>
		<div class="rounded-items-right">
			<a class="rounded-item-right" href="#">Jogos</a>
			<a class="rounded-item-right" href="#">Músicas</a>
			<a class="rounded-item-right" href="#">Programas</a>
		</div>
	</div>
</header>

<div class="search__suggest">
	<form role="form">
		<div class="search-suggest-input">
			<input type="text" id="search" placeholder="O que você procura?" autocomplete="off" spellcheck="false">
		</div>
	</form>
	<div class="search-suggest-results search-suggest-empty"></div>
</div>

<style type="text/css">
.search-suggest-input {
	width: 768px;
    max-width: 100%;
	margin: 0 auto;
    padding-top: 10rem;
}

.search-suggest-input input {
	height: 45px;
    background: #fff;
    border: 1px solid #efefef;
    border-bottom: 0;
    border-radius: 5px;
    width: 100%;
    padding: 0.5rem 1.5rem;
    box-shadow: 0 2px 5px 0px rgb(64 60 67 / 16%);
}

.search-suggest-input input:focus {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

.search-suggest-results {
    width: 768px;
    max-width: 100%;
    min-height: 60px;
    margin: 0 auto;
}

.search-suggest-results {
    position: relative;
    display: flex;
    flex-direction: column;
    border: 1px solid #efefef;
    border-top: 1px dashed #efefef;
    border-radius: 3px;
    background: #fff;
    box-shadow: 0 2px 5px 0px rgb(64 60 67 / 16%);
}

.search-suggest-category {
    display: flex;
    flex-direction: column;
    border-bottom: 1px solid #efefef;
    padding: 0.5rem;
    position: relative;
}

.search-suggest-category a:hover {
    background: #efefef;
}

.search-suggest-result {
    display: flex;
    flex-direction: row;
    padding: 0.5rem;
    border-radius: 3px;
    gap: 0.75rem;
}

.search-suggest-poster img {
    border-radius: 3px;
    width: 45px;
}

.search-suggest-summary {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.search-suggest-title {
    font-size: 16px;
    font-weight: 500;
}

.search-suggest-synopsis {
    font-size: 13px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.search-suggest-category:before {
    position: absolute;
    content: attr(data-category);
    right: 0.5rem;
    font-size: 12px;
    background: #e0e0e0;
    padding: 0 5px;
    border-radius: 3px;
}
</style>

<script type="text/javascript">
	$.getJSON('/search.json', function(data) {
	    var json_posts = data
	});
	$("#search").keyup(function(){
		var input = $(this).val();
		if(input === '')  {
			$(".search-suggest-results").html('').addClass("search-suggest-empty");
			return;
		}
		var regex = new RegExp(input, "i"), results;
		FilterQuerySearchByCategory = (postings, category) => {
			results += `<div class="search-suggest-category" data-category="`+ category +`">`;
			postings.forEach((posting, id) => {
				if (posting.title.search(regex) != -1) {
					results += `<a class="search-suggest-result" href="`+ posting.url +`">
					<div class="search-suggest-poster">
					<img src="https://image.tmdb.org/t/p/w45`+ posting.poster +`" alt="`+ posting.title +`">
					</div>
					<div class="search-suggest-summary">
					<div class="search-suggest-title">`+ posting.title +`</div>
					<div class="search-suggest-synopsis">`+ posting.description +`</div>
					</div>
					</a>`;
				}
			});
			results += `</div>`;
			return results
		}

		var html_filmes = FilterQuerySearchByCategory(json_posts, "Filmes")

		$(".search-suggest-results").html(html_filmes);
		$(".search-suggest-results").removeClass("search-suggest-empty");
	});
</script>